<aura:component access="GLOBAL">
	<!-- attributes -->
	<aura:attribute access="GLOBAL" name="title" type="String" />
	<aura:attribute access="GLOBAL" name="busy" type="Boolean" />
	<aura:attribute access="GLOBAL" name="prompt" type="Boolean" default="false" />
	<aura:attribute access="GLOBAL" name="large" type="Boolean" default="false" />
	<aura:attribute access="GLOBAL" name="directional" type="Boolean" default="false" />
	<aura:attribute access="GLOBAL" name="closeButton" type="Boolean" default="false" />
	<aura:attribute access="GLOBAL" name="modalClass" type="String" />
	<aura:attribute access="GLOBAL" name="containerClass" type="String" />
	<aura:attribute access="GLOBAL" name="headerClass" type="String" />
	<aura:attribute access="GLOBAL" name="contentClass" type="String" />
	<aura:attribute access="GLOBAL" name="footerClass" type="String" />
	<aura:attribute access="GLOBAL" name="header" type="aura.Component[]" />
	<aura:attribute access="GLOBAL" name="footer" type="aura.Component[]" />
	<aura:attribute access="GLOBAL" name="animation" type="String" default="fade-in-open" />

	<aura:attribute access="PRIVATE" name="visible" type="Boolean" default="false" />
	<aura:attribute access="PRIVATE" name="currentAnimation" type="String" />
	<!-- /attributes -->

	<!-- methods -->
	<aura:method access="GLOBAL" name="open" action="{!c.open}">
		<aura:attribute name="animation" type="String" />
	</aura:method>
	<aura:method access="GLOBAL" name="close" action="{!c.close}" />
	<aura:method access="GLOBAL" name="showToast" action="{!c.showToast}">
		<aura:attribute name="type" type="String" default="other" />
		<aura:attribute name="key" type="String" />
		<aura:attribute name="title" type="String" />
		<aura:attribute name="message" type="String" />
		<aura:attribute name="mode" type="String" default="dismissible" />
		<aura:attribute name="duration" type="Integer" default="5000" />
	</aura:method>
	<aura:method access="GLOBAL" name="dismissToast" action="{!c.dismissToast}" />
	<!-- /methods -->

	<!-- events -->
	<aura:registerEvent access="GLOBAL" name="onbeforeopen" type="c:genericComponentEvent" />
	<aura:registerEvent access="GLOBAL" name="onopen" type="c:genericComponentEvent" />
	<aura:registerEvent access="GLOBAL" name="onbeforeclose" type="c:genericComponentEvent" />
	<aura:registerEvent access="GLOBAL" name="onclose" type="c:genericComponentEvent" />
	<aura:registerEvent access="GLOBAL" name="onclosebutton" type="c:genericComponentEvent" />
	<aura:registerEvent access="GLOBAL" name="onaction" type="c:genericComponentEvent" />
	<!-- /events -->

	<!-- component -->
	<div id="{!globalId + '_root'}" class="modal-root">
		<div id="{!globalId + '_modal'}"
		     role="dialog"
		     aria-labelledby="{!if(empty(v.title), '', globalId + '_title')}"
		     class="{!v.modalClass + ' slds-modal' + if(v.visible, ' ' + v.currentAnimation, '') + if(v.prompt, ' slds-modal_prompt', '') + if(v.large, ' slds-modal_large', '')}"
		     onkeydown="{!c.modalKeyDown}">

			<!-- container -->
			<div class="{!v.containerClass + ' slds-modal__container'}">

				<!-- header -->
				<div class="{!v.headerClass + ' slds-modal__header' + if(and(empty(v.title), empty(v.header)), ' slds-modal__header_empty', '')}">
					<aura:if isTrue="{!v.closeButton}">
						<lightning:buttonIcon class="slds-modal__close"
						                      iconName="utility:close"
						                      alternativeText="Close"
						                      variant="bare-inverse"
						                      size="large"
						                      disabled="{!v.busy}"
						                      onclick="{!c.closeButtonClick}" />
					</aura:if>

					<h2 id="{!globalId + '_title'}"
					    class="{!'slds-text-heading_medium' + if(empty(v.title), ' slds-hide', '')}">{!v.title}</h2>

					{!v.header}

					<div aura:id="toastContainer"></div>
				</div>
				<!-- /header -->

				<!-- content -->
				<div class="{!v.contentClass + ' slds-modal__content'}">
					<c:spinnerPanel showSpinner="{!v.busy}">
						{!v.body}
					</c:spinnerPanel>
				</div>
				<!-- /content -->

				<!-- footer -->
				<aura:if isTrue="{!not(empty(v.footer))}">
					<div class="{!v.footerClass + ' slds-modal__footer' + if(v.directional, ' slds-modal__footer_directional', '')}">
						{!v.footer}
					</div>
				</aura:if>
				<!-- /footer -->

			</div>
			<!-- /container -->

		</div>
	</div>
	<!-- /component -->
</aura:component>